<!DOCTYPE html>
<html>

<head>
    <title>Evaluations</title>
    <!-- loading jsPsych -->
    <script src="https://unpkg.com/jspsych@7.3.4"></script>
    <link href="https://unpkg.com/jspsych@7.3.4/css/jspsych.css" rel="stylesheet" type="text/css" />

    <!-- loading jsPsych plug-ins -->
    <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe@0.1"></script> <!-- for data pipe -->
    <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe"></script> <!-- not sure which one i need-->
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.3"></script>
    <!-- for clicking through messages -->
    <link rel="stylesheet" href="https://unpkg.com/@jspsych/plugin-survey@1.0.1/css/survey.css" />
    <script src="https://unpkg.com/@jspsych/plugin-survey@1.0.1"></script> <!-- for survey plug-in -->
    <script src="https://unpkg.com/@jspsych/plugin-survey-text@2.0.0"></script> <!--- for survey question type -->
    <script src="https://unpkg.com/@jspsych/plugin-survey-rating@2.0.0"></script> <!--- for survey question type-->

    <!-- loading react-->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>


    <!-- UPLOAD ANY EXTERNAL JSONS HERE -->
    <script src="evaluation.js"></script> <!-- evaluation survey -->
    <!--add plugin for iframe here -->
    <script src="jackie-thesis-plugin/plugin-game-iframe/dist/index.browser.js"></script>
    <!-- allows me to embed video games as iframes -->



</head>

<body>
    <script>

        //Initialize jsPsych
        var jsPsych = initJsPsych({
            on_finish: function () {
                // jsPsych.data.displayData();
                const displayElement = document.getElementById('jspsych-content') || document.body;
                displayElement.innerHTML = `
        <p style="font-size: 1.25rem; color: #555;">
        </p>
Thank you for your contribution to our research! Feel free to exit the page.  
    </p>
      </div>
    `;
            },
        }
        );

        // create timelines for conditions. the contents of each timeline are at the bottom of this doc
        var block_1_ai_blind_timeline = [];
        var block_1_ai_aware_timeline = [];
        var test_timeline = [];



        // sequential condition assignment using data pipe. pushing a condition timeline into the timeline variable
        var timeline = [];
        async function createExperiment() {
            const condition = 0 //await jsPsychPipe.getCondition("P09AXWX5b5t6");
            if (condition == 0) { timeline = test_timeline; }
            if (condition == 1) { timeline = ai_aware_timeline; }
            if (condition == 2) { timeline = ai_blind_timeline; }
            jsPsych.run([...timeline, save_data]);
        }

        // setting subject_id and filename for confidential data analysis 
        const subject_id = jsPsych.randomization.randomID(10);
        const filename = `${subject_id}.csv`;

        /*  welcome message  */
        var welcome_ai_blind = {
            data: {
                phase: "welcome-message",
            },
            type: jsPsychHtmlKeyboardResponse,
            stimulus: "Welcome! In this study, you will play three short video games, completing a short survey after each game.<br><br>Please make sure you are in a quiet environment where you can focus for the duration of the study.<br><br>Press any key to begin.",
            choices: "ALL_KEYS",
        };


        var welcome_ai_aware = {
            data: {
                phase: "welcome-message",
            },
            type: jsPsychHtmlKeyboardResponse,
            choices: "ALL_KEYS",
            stimulus: "Welcome!<br><br>In this study, you will play three short video games that were generated by Artificial Intelligence (AI) with minimal human intervention.<br><br>You will complete a short survey after each game.<br><br>Please make sure you are in a quiet environment where you can focus for the duration of the study.<br><br>Press any key to begin.",
        };

        /* commitment check */
        const commitment_check = {
            type: jsPsychSurvey,
            survey_json: {
                elements: [
                    {
                        type: "checkbox",
                        name: "commitment-check",
                        title: "The quality of our survey data plays an integral role in the accuracy of our experiment results. To draw accurate conclusions, it is important to us that you provide thoughtful answers to each question. Do you commit to providing thoughtful answers in the questions in this survey?",
                        "isRequired": true,
                        "choices": [
                            {
                                "value": "maybe",
                                "text": "I can't promise either way"
                            },
                            {
                                "value": "yes",
                                "text": "Yes, I do"
                            },
                            {
                                "value": "no",
                                "text": "No, I do not"
                            }
                        ]
                    },
                ],
            },
            data: {
                phase: "commitment-check",
            },
        };


        var game_chat_1_echo = {
            type: jsPsychGameIframe,
            game_url: "chat_1_echo/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: {
                phase: "game-chat-1-echo",
            },
        };

        /* evaluation of video game */
        const evaluation_game_chat_1_echo = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: {
                phase: "evaluation-chat-1-echo",
            },
        };

        var game_chat_2_murmuration = {
            type: jsPsychGameIframe,
            game_url: "chat_2_murmuration/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-chat-2-murmuration" },
        };

        const evaluation_game_chat_2_murmuration = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-chat-2-murmuration" },
        };

        var game_chat_3_orbit = {
            type: jsPsychGameIframe,
            game_url: "chat_3_orbit/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-chat-3-orbit" },
        };

        const evaluation_game_chat_3_orbit = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-chat-3-orbit" },
        };

        var game_chat_4_courier = {
            type: jsPsychGameIframe,
            game_url: "chat_4_courier/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-chat-4-courier" },
        };

        const evaluation_game_chat_4_courier = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-chat-4-courier" },
        };

        var game_chat_5_glider = {
            type: jsPsychGameIframe,
            game_url: "chat_5_glider/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-chat-5-glider" },
        };

        const evaluation_game_chat_5_glider = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-chat-5-glider" },
        };

        var game_chat_6_tidepainter = {
            type: jsPsychGameIframe,
            game_url: "chat_6_tidepainter/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-chat-6-tidepainter" },
        };

        const evaluation_game_chat_6_tidepainter = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-chat-6-tidepainter" },
        };

        var game_claude_1_light = {
            type: jsPsychGameIframe,
            game_url: "claude_1_light/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-claude-1-light" },
        };

        const evaluation_game_claude_1_light = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-claude-1-light" },
        };

        var game_claude_2_moth = {
            type: jsPsychGameIframe,
            game_url: "claude_2_moth/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-claude-2-moth" },
        };

        const evaluation_game_claude_2_moth = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-claude-2-moth" },
        };

        var game_claude_3_bureaucromancer = {
            type: jsPsychGameIframe,
            game_url: "claude_3_bureaucromancer/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-claude-3-bureaucromancer" },
        };

        const evaluation_game_claude_3_bureaucromancer = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-claude-3-bureaucromancer" },
        };

        var game_claude_4_decibel = {
            type: jsPsychGameIframe,
            game_url: "claude_4_decibel/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-claude-4-decibel" },
        };

        const evaluation_game_claude_4_decibel = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-claude-4-decibel" },
        };

        var game_claude_5_cartographer = {
            type: jsPsychGameIframe,
            game_url: "claude_5_cartographer/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-claude-5-cartographer" },
        };

        const evaluation_game_claude_5_cartographer = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-claude-5-cartographer" },
        };

        var game_claude_6_flame = {
            type: jsPsychGameIframe,
            game_url: "claude_6_flame/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-claude-6-flame" },
        };

        const evaluation_game_claude_6_flame = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-claude-6-flame" },
        };

        var game_gemini_1_static = {
            type: jsPsychGameIframe,
            game_url: "gemini_1_static/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-gemini-1-static" },
        };

        const evaluation_game_gemini_1_static = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-gemini-1-static" },
        };

        var game_gemini_2_patch = {
            type: jsPsychGameIframe,
            game_url: "gemini_2_patch/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-gemini-2-patch" },
        };

        const evaluation_game_gemini_2_patch = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-gemini-2-patch" },
        };

        var game_gemini_3_suture = {
            type: jsPsychGameIframe,
            game_url: "gemini_3_suture/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-gemini-3-suture" },
        };

        const evaluation_game_gemini_3_suture = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-gemini-3-suture" },
        };

        var game_gemini_4_substratum = {
            type: jsPsychGameIframe,
            game_url: "gemini_4_substratum/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-gemini-4-substratum" },
        };

        const evaluation_game_gemini_4_substratum = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-gemini-4-substratum" },
        };

        var game_gemini_5_rename = {
            type: jsPsychGameIframe,
            game_url: "gemini_5_rename/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-gemini-5-rename" },
        };

        const evaluation_game_gemini_5_rename = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-gemini-5-rename" },
        };

        var game_gemini_6_redact = {
            type: jsPsychGameIframe,
            game_url: "gemini_6_redact/index.html",
            allow_manual_end: true,
            manual_end_delay: 60000,
            data: { phase: "game-gemini-6-redact" },
        };

        const evaluation_game_gemini_6_redact = {
            type: jsPsychSurvey,
            survey_json: evaluation_json,
            data: { phase: "evaluation-gemini-6-redact" },
        };


        function makeConceptTrial(conceptTitle, phaseName) {
            return {
                type: jsPsychSurvey,
                survey_json: {
                    elements: [
                        {
                            type: "text",
                            name: phaseName,
                            title: conceptTitle,
                            isRequired: true,
                        },
                        {
                            type: "rating",
                            name: "concept-creativity-rating",
                            title: "Using your own subjective definition of creativity, how creative is this video game concept?",
                            isRequired: true,
                            minRateDescription: "Not at all creative",
                            maxRateDescription: "Extremely creative",
                            displayMode: "buttons"
                        },
                        {
                            type: "rating",
                            name: "concept-implementation-rating",
                            title: "How accurately did the game that you just played reflect this game concept?",
                            isRequired: true,
                            minRateDescription: "Not at all accurately",
                            maxRateDescription: "Extremely accurately",
                            displayMode: "buttons"
                        },
                    ],
                },
                data: { phase: phaseName },
            };
        }

        const concept_chat_1_echo = makeConceptTrial("[concept title here]", "concept-chat-1-echo");
        const concept_chat_2_murmuration = makeConceptTrial("[concept title here]", "concept-chat-2-murmuration");
        const concept_chat_3_orbit = makeConceptTrial("[concept title here]", "concept-chat-3-orbit");
        const concept_chat_4_courier = makeConceptTrial("[concept title here]", "concept-chat-4-courier");
        const concept_chat_5_glider = makeConceptTrial("[concept title here]", "concept-chat-5-glider");
        const concept_chat_6_tidepainter = makeConceptTrial("[concept title here]", "concept-chat-6-tidepainter");
        const concept_claude_1_light = makeConceptTrial("[concept title here]", "concept-claude-1-light");
        const concept_claude_2_moth = makeConceptTrial("[concept title here]", "concept-claude-2-moth");
        const concept_claude_3_bureaucromancer = makeConceptTrial("[concept title here]", "concept-claude-3-bureaucromancer");
        const concept_claude_4_decibel = makeConceptTrial("[concept title here]", "concept-claude-4-decibel");
        const concept_claude_5_cartographer = makeConceptTrial("[concept title here]", "concept-claude-5-cartographer");
        const concept_claude_6_flame = makeConceptTrial("[concept title here]", "concept-claude-6-flame");
        const concept_gemini_1_static = makeConceptTrial("[concept title here]", "concept-gemini-1-static");
        const concept_gemini_2_patch = makeConceptTrial("[concept title here]", "concept-gemini-2-patch");
        const concept_gemini_3_suture = makeConceptTrial("[concept title here]", "concept-gemini-3-suture");
        const concept_gemini_4_substratum = makeConceptTrial("[concept title here]", "concept-gemini-4-substratum");
        const concept_gemini_5_rename = makeConceptTrial("[concept title here]", "concept-gemini-5-rename");
        const concept_gemini_6_redact = makeConceptTrial("[concept title here]", "concept-gemini-6-redact");

        const baseline_creativity = {
            type: jsPsychSurvey,
            survey_json: {
                elements: [
                    {
                        type: "rating",
                        name: "baseline_creativity_rating",
                        title: "In general, using your own subjective definition of creativity, how creative do you find video games?",
                        isRequired: true,
                        minRateDescription: "Not at all creative",
                        maxRateDescription: "Extremely creative",
                        displayMode: "buttons"
                    },
                ],
            },
            data: {
                phase: "baseline-creativity-rating",
            },
        }

        const baseline_originality = {
            type: jsPsychSurvey,
            survey_json: {
                elements: [
                    {
                        type: "rating",
                        name: "baseline_originality_rating",
                        title: "In general, how original or novel do you find video games? Consider elements such as mechanics, theme, narrative, and aesthetics.",
                        isRequired: true,
                        minRateDescription: "Not at all original",
                        maxRateDescription: "Extremely original",
                        displayMode: "buttons"
                    },
                ],
            },
            data: {
                phase: "baseline-originality-rating",
            },
        }


        const baseline_effectiveness = {
            type: jsPsychSurvey,
            survey_json: {
                elements: [
                    {
                        type: "rating",
                        name: "baseline_effectiveness_rating",
                        title: "In general, how enjoyable do you find video games?",
                        isRequired: true,
                        minRateDescription: "Not at all enjoyable",
                        maxRateDescription: "Extremely enjoyable",
                        displayMode: "buttons"
                    },
                ],
            },
            data: {
                phase: "baseline-effectiveness-rating",
            },
        }


        const baseline_authenticity = {
            type: jsPsychSurvey,
            survey_json: {
                elements: [
                    {
                        type: "rating",
                        name: "baseline_authenticity_rating",
                        title: "In general, how authentic do you find video games? Do you feel they reflect the authenticity of the developer(s)?",
                        isRequired: true,
                        minRateDescription: "Not at all authentic",
                        maxRateDescription: "Extremely authentic",
                        displayMode: "buttons"
                    },
                ],
            },
            data: {
                phase: "baseline-authenticity-rating",
            },
        }


        const baseline_intentionality = {
            type: jsPsychSurvey,
            survey_json: {
                elements: [
                    {
                        type: "rating",
                        name: "baseline_intentionality_rating",
                        title: "In general, how intentional do you find video games? Do you feel they reflect the personal efforts and lived experiences of the developer(s)?",
                        isRequired: true,
                        minRateDescription: "Not at all intentional",
                        maxRateDescription: "Extremely intentional",
                        displayMode: "buttons"
                    },
                ],
            },
            data: {
                phase: "baseline-intentionality-rating",
            },
        }

        //goodbye message and brief explanation to user about our experiment motive
        var goodbye = {
            data: {
                phase: "goodbye",
            },
            type: jsPsychHtmlKeyboardResponse,
            stimulus: `
        <p> You have completed the survey! Please save your data before closing the page. <p>
      `,
            post_trial_gap: 1000,
        };


        const ai_aware_question = {
            type: jsPsychSurvey,
            survey_json: {
                elements: [
                    {
                        type: "comment",
                        name: "ai_aware_question",
                        title: "Were your assessments of these games impacted by the knowledge that they were generated by AI? Please explain.",
                        isRequired: true,
                    },
                ],
            },
            data: {
                phase: "ai-aware-question",
            },
        };

        const ai_blind_question = {
            type: jsPsychSurvey,
            survey_json: {
                elements: [
                    {
                        type: "comment",
                        name: "ai_blind_question",
                        title: "The three games that you played were actually generated by AI with minimal human intervention. Knowing this now, would you have answered any of the previous questions differently? Please explain.",
                        isRequired: true,
                    },
                ],
            },
            data: {
                phase: "ai-blind-question",
            },
        };


        /* ------------- PUSHING TIMELINE FOR EACH CONDITION ----------------- */

        test_timeline.push(
            welcome_ai_aware,
            game_chat_1_echo,
            goodbye
        )

        block_1_ai_aware_timeline.push(
            welcome_ai_aware,
            commitment_check,
            game_claude_1_light,
            evaluation_game_claude_1_light,
            concept_game_claude_1_light,
            game_claude_2_moth,
            evaluation_game_claude_2_moth,
            concept_claude_2_moth,
            game_claude_4_decibel,
            evaluation_game_claude_4_decibel,
            concept_claude_4_decibel,
            baseline_creativity,
            baseline_originality,
            baseline_effectiveness,
            baseline_authenticity,
            baseline_intentionality,
            ai_aware_question,
            goodbye
        )


        block_1_ai_blind_timeline.push(
            welcome_ai_blind,
            commitment_check,
            game_claude_1_light,
            evaluation_game_claude_1_light,
            concept_game_claude_1_light,
            game_claude_2_moth,
            evaluation_game_claude_2_moth,
            concept_claude_2_moth,
            game_claude_4_decibel,
            evaluation_game_claude_4_decibel,
            concept_claude_4_decibel,
            baseline_creativity,
            baseline_originality,
            baseline_effectiveness,
            baseline_authenticity,
            baseline_intentionality,
            ai_blind_question,
            goodbye
        )

        //SAVE EXPERIMENT DATA TO OSF via datapipe
        const save_data = {
            type: jsPsychPipe,
            action: "save",
            experiment_id: "pVI31akTlfRu",
            filename: filename,
            data_string: () => jsPsych.data.get().csv()
        };

        createExperiment();


        //run experiment
        // jsPsych.run(timeline);

    </script>
</body>

</html>